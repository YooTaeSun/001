<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.townsi.table.tableDAO">

	<!-- table info -->
	<select id="selectList_mysql" parameterType="hashMap" resultType="hashMap">
		SELECT
					*
				FROM
					(
					select
							A.ORDINAL_POSITION AS ORDINAL_POSITION,
							'' as MEM_VARI,
							A.COLUMN_COMMENT,
							A.COLUMN_COMMENT as COMMENTS,
							A.COLUMN_NAME,
							A.COLUMN_NAME as SET_GET_COLUMN_NAME,
							A.COLUMN_NAME as CAMEL_COLUMN_NAME,
							A.COLUMN_TYPE,
							A.COLUMN_TYPE as W_TYPE
		-- 					,A.COLUMN_KEY
		-- 					,A.COLUMN_DEFAULT
		-- 					,A.IS_NULLABLE
		-- 					,CONCAT( B.TABLE_NAME, '.', B.COLUMN_NAME ) AS FK
						FROM
							INFORMATION_SCHEMA.COLUMNS A
						LEFT OUTER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE B ON
							(
								B.COLUMN_NAME = A.COLUMN_NAME
								AND B.TABLE_NAME = 'posts'
								AND B.REFERENCED_TABLE_NAME IS NOT NULL
							)
						WHERE
							A.TABLE_SCHEMA = SCHEMA()
							AND A.TABLE_NAME = 'posts'
					) A
				ORDER BY
					A.ORDINAL_POSITION
	</select>

	<select id="selectList_oracle" parameterType="hashMap" resultType="hashMap">
	WITH T_CON AS(
		SELECT
			UCC.COLUMN_NAME,
			UCC.CONSTRAINT_NAME,
			US.CONSTRAINT_TYPE
		FROM
			USER_CONS_COLUMNS UCC,
			USER_CONSTRAINTS US
		WHERE
			1 = 1
			AND UCC.CONSTRAINT_NAME = US.CONSTRAINT_NAME
			AND UCC.TABLE_NAME = 'DEPT'
	) SELECT
		*
	FROM
		(
			SELECT
				COLUMN_ID AS ORDINAL_POSITION,
				'private ' || DECODE( DATA_TYPE, 'NUMBER', (CASE WHEN DATA_SCALE != 0 THEN 'Double' ELSE 'Long' END), 'DATE', 'Date', 'String' ) || ' ' || LOWER( SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 1, 1 ))|| SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 2 )|| ';' AS mem_vari,
				ACC.COMMENTS AS COLUMN_COMMENT,
				DECODE( LENGTH( COMMENTS ), NULL, '',  COMMENTS ) AS COMMENTS,
				ATC.COLUMN_NAME AS COLUMN_NAME, /* 컬럼명 */
				UPPER( SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 1, 1 ))|| SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 2 ) AS SET_GET_COLUMN_NAME /* 컬럼명 */
				,LOWER( SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 1, 1 ))|| SUBSTR( REPLACE( INITCAP( ATC.COLUMN_NAME ), '_' ), 2 ) AS CAMEL_COLUMN_NAME, /* 컬럼명 */
				DATA_TYPE AS COLUMN_TYPE, /* 데이터타입 */
				DECODE( DATA_TYPE, 'NUMBER', (CASE WHEN DATA_SCALE != 0 THEN 'Double' ELSE 'Long' END), 'DATE', 'Date', 'String' ) AS W_TYPE 
			FROM
				ALL_TAB_COLUMNS ATC,
				ALL_COL_COMMENTS ACC
			WHERE
				1 = 1
				AND ATC.OWNER = ACC.OWNER
				AND ATC.TABLE_NAME = ACC.TABLE_NAME
				AND ATC.COLUMN_NAME = ACC.COLUMN_NAME
				AND ATC.TABLE_NAME = 'DEPT'
		) A
	ORDER BY
		A.ORDINAL_POSITION
	</select>
</mapper>


ORDINAL_POSITION |MEM_VARI                   |COLUMN_COMMENT |COMMENTS |COLUMN_NAME  |SET_GET_COLUMN_NAME |CAMEL_COLUMN_NAME |COLUMN_TYPE |W_TYPE |
-----------------|---------------------------|---------------|---------|-------------|--------------------|------------------|------------|-------|
2                |private String dname;      |부서명            |부서명      |DNAME        |Dname               |dname             |VARCHAR2    |String |
3                |private String loc;        |부서위치           |부서위치     |LOC          |Loc                 |loc               |VARCHAR2    |String |
4                |private String userName;   |               |         |USER_NAME    |UserName            |userName          |VARCHAR2    |String |
5                |private String userNameId; |               |         |USER_NAME_ID |UserNameId          |userNameId        |VARCHAR2    |String |
1                |private Long deptno;       |부서번호           |부서번호     |DEPTNO       |Deptno              |deptno            |NUMBER      |Long   |
